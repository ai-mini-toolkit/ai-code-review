# 产品简报 - AI Code Review

## 项目名称
**ai-code-review** - AI 智能代码审查系统

## 概述
一个基于 AI 的代码审查系统，通过 Webhook 自动触发，对代码变更进行智能审查，统一开发规范、清洗调用链路、提高交付质量。

## 目标用户
- **个人开发者**：希望自动检查代码质量的小型项目
- **开发团队**：需要标准化代码审查流程的团队
- **企业**：希望提升代码质量、减少 Bug 的组织

## 痛点与解决方案

| 痛点 | 解决方案 |
|------|---------|
| 开发标准不统一，代码编写不规范 | 代码风格审查 + 规范模板配置 |
| 代码调用越界 | 调用链路分析 + 可视化清洗 |
| 交付质量差 | 综合质量检查 + 阈值拦截机制 |

## 核心功能

### 核心流程
```
Git Push/PR/MR (Webhook) → 生成 Review 任务 → 队列排队执行 → 结果检查 → 超阈值通知
```

### Phase 1 (MVP)

#### 1. Webhook 触发
- 支持 GitHub/GitLab Webhook
- 触发时机：Push + PR/MR 创建/更新
- 自动解析 Payload 提取代码变更

#### 2. 任务管理
- 自动生成 Code Review 任务
- 任务队列管理（异步执行）
- 任务状态跟踪（等待/执行中/完成/失败）

#### 3. AI 智能审查
| 审查维度 | 具体内容 |
|---------|---------|
| 代码质量 | 命名规范、代码结构、复杂度分析 |
| 安全问题 | SQL注入、XSS、敏感信息泄漏 |
| 性能问题 | 算法效率、资源使用优化 |
| 代码风格 | 规范一致性（可配置模板） |
| Bug 预测 | 潜在错误点识别 |
| 调用链路 | 依赖关系分析、循环依赖检测 |

#### 4. 审查报告
- 结构化报告（按优先级分级）
- 代码片段高亮显示问题位置
- 调用链路可视化
- 可配置审查提示模板

#### 5. 阈值与通知
- **阈值策略**：
  - Error 级别：强制拦截，阻止合并
  - Warning 级别：仅报告，人工决定
  - Info 级别：参考性建议
- **通知方式**：
  - 邮件通知
  - Git 平台评论（GitHub PR comment）
  - 支持扩展（钉钉/飞书/企业微信/Slack）

#### 6. 配置管理
- 审查提示模板配置
- 通知方式配置
- 路径过滤（忽略特定目录）
- 多项目不同规则

#### 7. Web 界面
- 项目管理（添加/删除仓库）
- 规则配置（模板、阈值、通知）
- 审查历史记录查看
- 审查结果详情展示
- 调用链路可视化

### Phase 2（扩展功能）
- 团队成员协作
- 自定义规则引擎
- 审查历史趋势分析
- 大文件智能拆分处理
- 更多 Git 平台支持

## 技术栈

### 后端
- **语言**：Java 17+
- **框架**：Spring Boot 3.x
- **消息队列**：RabbitMQ / Redis Queue
- **AI**：OpenAI API / Claude API
- **数据库**：MySQL / PostgreSQL
- **缓存**：Redis
- **Git 操作**：JGit / Git CLI

### 前端
- **框架**：Vue 3 + Vite
- **UI组件**：Element Plus / Ant Design Vue
- **状态管理**：Pinia
- **图表**：ECharts（调用链路可视化）

### 基础设施
- **容器化**：Docker
- **版本控制**：Git
- **部署**：Docker Compose

## 初步范围 (Phase 1)

### 包含
- Webhook 接收与解析（Push + PR/MR）
- 任务队列管理
- 增量代码审查（diff 分析）
- AI 驱动的多维度审查
- 调用链路分析（基础）
- 阈值拦截机制
- 邮件 + Git 评论通知
- Web 管理界面
- 多项目配置

### 不包含
- 复杂的权限管理（Phase 2）
- 自定义规则引擎（Phase 2）
- 审查历史趋势分析（Phase 2）
- 大文件智能拆分（Phase 2）

## 成功指标
- 代码审查覆盖率提升 50%
- 审查效率提升 3 倍
- 线上 Bug 率降低 30%
- 开发规范统一度提升 80%
